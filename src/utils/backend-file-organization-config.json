{
  "description": "File organization configuration for backend services - Maps file types and entities to remote storage directories",
  "storageRoot": "/srv/remote-storage",
  "fileOrganization": {
    "customer": {
      "logo": "Logos/Clientes/{customerFantasyName}/"
    },
    "supplier": {
      "logo": "Logos/Fornecedores/{supplierFantasyName}/"
    },
    "warning": {
      "attachment": "Advertencias/{userName}/"
    },
    "cut": {
      "vinyl": "Plotter/{customerFantasyName}/Adesivos/",
      "stencil": "Plotter/{customerFantasyName}/Espovo/",
      "default": "Plotter/{customerFantasyName}/Outros/"
    },
    "task": {
      "budget": "Orcamentos/Tarefas/{customerFantasyName}/",
      "receipt": "Comprovantes/Tarefas/{customerFantasyName}/",
      "reimbursement": "Reembolsos/Tarefas/{customerFantasyName}/",
      "invoice": "Notas Fiscais/Tarefas/{customerFantasyName}/",
      "invoiceReimbursement": "Notas Fiscais Reembolso/Tarefas/{customerFantasyName}/",
      "artwork_image": "Projetos/{customerFantasyName}/Imagens/",
      "artwork_pdf": "Projetos/{customerFantasyName}/Pdfs/",
      "artwork_other": "Projetos/{customerFantasyName}/Outros/"
    },
    "airbrushing": {
      "budget": "Orcamentos/Aerografias/{customerFantasyName}/",
      "receipt": "Comprovantes/Aerografias/{customerFantasyName}/",
      "reimbursement": "Reembolsos/Aerografias/{customerFantasyName}/",
      "invoice": "Notas Fiscais/Aerografias/{customerFantasyName}/",
      "invoiceReimbursement": "Notas Fiscais Reembolso/Aerografias/{customerFantasyName}/",
      "artwork_image": "Aerografias/{customerFantasyName}/Imagens/",
      "artwork_pdf": "Aerografias/{customerFantasyName}/Pdfs/",
      "artwork_other": "Aerografias/{customerFantasyName}/Outros/"
    },
    "order": {
      "budget": "Orcamentos/Pedidos/{supplierFantasyName}/",
      "receipt": "Comprovantes/Pedidos/{supplierFantasyName}/",
      "reimbursement": "Reembolsos/Pedidos/{supplierFantasyName}/",
      "invoice": "Notas Fiscais/Pedidos/{supplierFantasyName}/",
      "invoiceReimbursement": "Notas Fiscais Reembolso/Pedidos/{supplierFantasyName}/"
    },
    "withdrawal": {
      "budget": "Orcamentos/RetiradasExternas/{withdrawerName}/",
      "receipt": "Comprovantes/RetiradasExternas/{withdrawerName}/",
      "reimbursement": "Reembolsos/RetiradasExternas/{withdrawerName}/",
      "invoice": "Notas Fiscais/RetiradasExternas/{withdrawerName}/",
      "invoiceReimbursement": "Notas Fiscais Reembolso/RetiradasExternas/{withdrawerName}/"
    }
  },
  "specialDirectories": {
    "thumbnails": "Thumbnails/",
    "trash": "Lixeira/",
    "recycle": ".recycle/",
    "auxiliares": "Auxiliares/",
    "drafts": "Rascunhos/",
    "photos": "Fotos/",
    "arts": "Artes/",
    "backup": "Backup/",
    "notes": "Observacoes/"
  },
  "contextFieldMapping": {
    "customerFantasyName": ["customer.fantasyName", "customer.name", "customerId"],
    "supplierFantasyName": ["supplier.fantasyName", "supplier.name", "supplierId"],
    "userName": ["user.name", "user.fullName", "userId"],
    "withdrawerName": ["withdrawer.name", "withdrawerName", "withdrawerId"]
  },
  "fileTypeMapping": {
    "fieldToFileType": {
      "logo": "logo",
      "budgets": "budget",
      "orcamentos": "budget",
      "invoices": "invoice",
      "notasFiscais": "invoice",
      "receipts": "receipt",
      "comprovantes": "receipt",
      "reimbursements": "reimbursement",
      "reembolsos": "reimbursement",
      "invoiceReimbursements": "invoiceReimbursement",
      "notasFiscaisReembolso": "invoiceReimbursement",
      "artworks": "artwork",
      "artes": "artwork",
      "cuts": "cut",
      "plotter": "cut",
      "attachments": "attachment",
      "documents": "document"
    },
    "description": "File type is determined by the field being uploaded to, not by filename patterns"
  },
  "nameSanitization": {
    "invalidChars": "[<>:\"/\\\\|?*\\x00-\\x1f]",
    "replacement": "-",
    "maxLength": 255,
    "fallbackName": "Sem-Nome"
  },
  "implementationNotes": {
    "1": "File type is determined by the field name being uploaded to (e.g., 'budgets' field = budget file type)",
    "2": "The backend should read the '_context' field from FormData to get entity metadata (entityType, customerId, etc.)",
    "3": "Each file field should have a corresponding '{fieldName}_fileType' field specifying the file type",
    "4": "Directory paths should be created if they don't exist",
    "5": "Variables in paths (e.g., {customerFantasyName}) should be replaced with actual values from context",
    "6": "All directory and file names should be sanitized before use",
    "7": "If context data is missing, use fallback directories or reject the upload",
    "8": "Never rely on filename patterns to determine file type - always use field context"
  }
}