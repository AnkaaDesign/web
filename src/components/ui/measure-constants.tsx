import { MEASURE_UNIT, MEASURE_TYPE } from "../../constants";
import {
  IconScale,
  IconRuler2,
  IconDroplet,
  IconHash,
  IconSquare,
  IconPackage,
  IconBox,
  IconCircle,
  IconRectangle,
  IconDimensions,
  IconWeight,
  IconBottle,
  IconCube,
} from "@tabler/icons-react";

// Icon mappings for measure types
export const MEASURE_TYPE_ICONS = {
  [MEASURE_TYPE.WEIGHT]: IconScale,
  [MEASURE_TYPE.VOLUME]: IconDroplet,
  [MEASURE_TYPE.LENGTH]: IconRuler2,
  [MEASURE_TYPE.AREA]: IconSquare,
  [MEASURE_TYPE.COUNT]: IconHash,
  [MEASURE_TYPE.DIAMETER]: IconCircle,
  [MEASURE_TYPE.THREAD]: IconRuler2,
  [MEASURE_TYPE.ELECTRICAL]: IconScale,
  [MEASURE_TYPE.SIZE]: IconDimensions,
} as const;

// Icon mappings for specific units
export const MEASURE_UNIT_ICONS = {
  // Weight units
  [MEASURE_UNIT.GRAM]: IconScale,
  [MEASURE_UNIT.KILOGRAM]: IconWeight,

  // Volume units
  [MEASURE_UNIT.MILLILITER]: IconDroplet,
  [MEASURE_UNIT.LITER]: IconBottle,
  [MEASURE_UNIT.CUBIC_METER]: IconCube,
  [MEASURE_UNIT.CUBIC_CENTIMETER]: IconCube,

  // Length units
  [MEASURE_UNIT.MILLIMETER]: IconRuler2,
  [MEASURE_UNIT.CENTIMETER]: IconRuler2,
  [MEASURE_UNIT.METER]: IconDimensions,
  [MEASURE_UNIT.INCHES]: IconRuler2,

  // Count units
  [MEASURE_UNIT.UNIT]: IconCircle,
  [MEASURE_UNIT.PAIR]: IconCircle,
  [MEASURE_UNIT.DOZEN]: IconHash,
  [MEASURE_UNIT.HUNDRED]: IconHash,
  [MEASURE_UNIT.THOUSAND]: IconHash,

  // Packaging units
  [MEASURE_UNIT.PACKAGE]: IconPackage,
  [MEASURE_UNIT.BOX]: IconBox,
  [MEASURE_UNIT.ROLL]: IconCircle,
  [MEASURE_UNIT.SHEET]: IconRectangle,
  [MEASURE_UNIT.SET]: IconCube,
  [MEASURE_UNIT.SACK]: IconPackage,

  // Area units
  [MEASURE_UNIT.SQUARE_CENTIMETER]: IconSquare,
  [MEASURE_UNIT.SQUARE_METER]: IconSquare,

  // Diameter units (fractional inches)
  [MEASURE_UNIT.INCH_1_8]: IconCircle,
  [MEASURE_UNIT.INCH_1_4]: IconCircle,
  [MEASURE_UNIT.INCH_3_8]: IconCircle,
  [MEASURE_UNIT.INCH_1_2]: IconCircle,
  [MEASURE_UNIT.INCH_5_8]: IconCircle,
  [MEASURE_UNIT.INCH_3_4]: IconCircle,
  [MEASURE_UNIT.INCH_7_8]: IconCircle,
  [MEASURE_UNIT.INCH_1]: IconCircle,
  [MEASURE_UNIT.INCH_1_1_4]: IconCircle,
  [MEASURE_UNIT.INCH_1_1_2]: IconCircle,
  [MEASURE_UNIT.INCH_2]: IconCircle,

  // Thread units
  [MEASURE_UNIT.THREAD_MM]: IconRuler2,
  [MEASURE_UNIT.THREAD_TPI]: IconRuler2,

  // Electrical units
  [MEASURE_UNIT.WATT]: IconScale,
  [MEASURE_UNIT.VOLT]: IconScale,
  [MEASURE_UNIT.AMPERE]: IconScale,

  // PPE Size units
  [MEASURE_UNIT.P]: IconDimensions,
  [MEASURE_UNIT.M]: IconDimensions,
  [MEASURE_UNIT.G]: IconDimensions,
  [MEASURE_UNIT.GG]: IconDimensions,
  [MEASURE_UNIT.XG]: IconDimensions,
} as const;

// Color schemes for different measure types
export const MEASURE_TYPE_COLORS = {
  [MEASURE_TYPE.WEIGHT]: {
    primary: "text-orange-600 dark:text-orange-400",
    secondary: "text-orange-500 dark:text-orange-300",
    background: "bg-orange-50 dark:bg-orange-950",
    border: "border-orange-200 dark:border-orange-800",
    badge: "bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",
  },
  [MEASURE_TYPE.VOLUME]: {
    primary: "text-blue-600 dark:text-blue-400",
    secondary: "text-blue-500 dark:text-blue-300",
    background: "bg-blue-50 dark:bg-blue-950",
    border: "border-blue-200 dark:border-blue-800",
    badge: "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",
  },
  [MEASURE_TYPE.LENGTH]: {
    primary: "text-green-600 dark:text-green-400",
    secondary: "text-green-500 dark:text-green-300",
    background: "bg-green-50 dark:bg-green-950",
    border: "border-green-200 dark:border-green-800",
    badge: "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",
  },
  [MEASURE_TYPE.AREA]: {
    primary: "text-purple-600 dark:text-purple-400",
    secondary: "text-purple-500 dark:text-purple-300",
    background: "bg-purple-50 dark:bg-purple-950",
    border: "border-purple-200 dark:border-purple-800",
    badge: "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
  },
  [MEASURE_TYPE.COUNT]: {
    primary: "text-gray-600 dark:text-gray-400",
    secondary: "text-gray-500 dark:text-gray-300",
    background: "bg-gray-50 dark:bg-gray-950",
    border: "border-gray-200 dark:border-gray-800",
    badge: "bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",
  },
  [MEASURE_TYPE.DIAMETER]: {
    primary: "text-indigo-600 dark:text-indigo-400",
    secondary: "text-indigo-500 dark:text-indigo-300",
    background: "bg-indigo-50 dark:bg-indigo-950",
    border: "border-indigo-200 dark:border-indigo-800",
    badge: "bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",
  },
  [MEASURE_TYPE.THREAD]: {
    primary: "text-yellow-600 dark:text-yellow-400",
    secondary: "text-yellow-500 dark:text-yellow-300",
    background: "bg-yellow-50 dark:bg-yellow-950",
    border: "border-yellow-200 dark:border-yellow-800",
    badge: "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",
  },
  [MEASURE_TYPE.ELECTRICAL]: {
    primary: "text-red-600 dark:text-red-400",
    secondary: "text-red-500 dark:text-red-300",
    background: "bg-red-50 dark:bg-red-950",
    border: "border-red-200 dark:border-red-800",
    badge: "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",
  },
  [MEASURE_TYPE.SIZE]: {
    primary: "text-pink-600 dark:text-pink-400",
    secondary: "text-pink-500 dark:text-pink-300",
    background: "bg-pink-50 dark:bg-pink-950",
    border: "border-pink-200 dark:border-pink-800",
    badge: "bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",
  },
} as const;

// Unit category groupings for better organization
export const UNIT_CATEGORIES = {
  weight: {
    label: "Peso",
    icon: IconScale,
    units: [MEASURE_UNIT.GRAM, MEASURE_UNIT.KILOGRAM],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.WEIGHT],
  },
  volume: {
    label: "Volume",
    icon: IconDroplet,
    units: [MEASURE_UNIT.MILLILITER, MEASURE_UNIT.LITER, MEASURE_UNIT.CUBIC_METER, MEASURE_UNIT.CUBIC_CENTIMETER],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.VOLUME],
  },
  length: {
    label: "Comprimento",
    icon: IconRuler2,
    units: [MEASURE_UNIT.MILLIMETER, MEASURE_UNIT.CENTIMETER, MEASURE_UNIT.METER, MEASURE_UNIT.INCHES],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.LENGTH],
  },
  count: {
    label: "Contagem",
    icon: IconHash,
    units: [MEASURE_UNIT.UNIT, MEASURE_UNIT.PAIR, MEASURE_UNIT.DOZEN, MEASURE_UNIT.HUNDRED, MEASURE_UNIT.THOUSAND],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.COUNT],
  },
  packaging: {
    label: "Embalagem",
    icon: IconPackage,
    units: [MEASURE_UNIT.PACKAGE, MEASURE_UNIT.BOX, MEASURE_UNIT.ROLL, MEASURE_UNIT.SHEET, MEASURE_UNIT.SET, MEASURE_UNIT.SACK],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.COUNT], // Use count colors for packaging
  },
  area: {
    label: "Área",
    icon: IconSquare,
    units: [MEASURE_UNIT.SQUARE_CENTIMETER, MEASURE_UNIT.SQUARE_METER],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.AREA],
  },
  diameter: {
    label: "Diâmetro",
    icon: IconCircle,
    units: [
      MEASURE_UNIT.INCH_1_8,
      MEASURE_UNIT.INCH_1_4,
      MEASURE_UNIT.INCH_3_8,
      MEASURE_UNIT.INCH_1_2,
      MEASURE_UNIT.INCH_5_8,
      MEASURE_UNIT.INCH_3_4,
      MEASURE_UNIT.INCH_7_8,
      MEASURE_UNIT.INCH_1,
      MEASURE_UNIT.INCH_1_1_4,
      MEASURE_UNIT.INCH_1_1_2,
      MEASURE_UNIT.INCH_2,
    ],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.DIAMETER],
  },
  thread: {
    label: "Rosca",
    icon: IconRuler2,
    units: [MEASURE_UNIT.THREAD_MM, MEASURE_UNIT.THREAD_TPI],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.THREAD],
  },
  electrical: {
    label: "Elétrico",
    icon: IconScale,
    units: [MEASURE_UNIT.WATT, MEASURE_UNIT.VOLT, MEASURE_UNIT.AMPERE],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.ELECTRICAL],
  },
  size: {
    label: "Tamanho",
    icon: IconDimensions,
    units: [MEASURE_UNIT.P, MEASURE_UNIT.M, MEASURE_UNIT.G, MEASURE_UNIT.GG, MEASURE_UNIT.XG],
    color: MEASURE_TYPE_COLORS[MEASURE_TYPE.SIZE],
  },
} as const;

// Utility CSS classes for measure-related styling
export const MEASURE_STYLES = {
  // Input sizes
  inputSizes: {
    sm: "h-8 text-sm",
    md: "h-10 text-base",
    lg: "h-12 text-lg",
  },

  // Display sizes
  displaySizes: {
    xs: "text-xs",
    sm: "text-sm",
    md: "text-base",
    lg: "text-lg",
    xl: "text-xl",
  },

  // Icon sizes
  iconSizes: {
    xs: "h-3 w-3",
    sm: "h-4 w-4",
    md: "h-5 w-5",
    lg: "h-6 w-6",
    xl: "h-8 w-8",
  },

  // Common spacing
  spacing: {
    compact: "gap-1",
    normal: "gap-2",
    comfortable: "gap-3",
    spacious: "gap-4",
  },

  // Animation classes
  animations: {
    fadeIn: "animate-in fade-in-0 duration-200",
    slideIn: "animate-in slide-in-from-left-1 duration-200",
    scaleIn: "animate-in zoom-in-95 duration-150",
  },
} as const;

// Brazilian formatting preferences
export const BRAZILIAN_MEASURE_FORMATS = {
  // Decimal separator (comma instead of dot)
  decimalSeparator: ",",

  // Thousand separator (dot instead of comma)
  thousandSeparator: ".",

  // Common decimal places by unit type
  decimalPlaces: {
    [MEASURE_TYPE.WEIGHT]: 3,
    [MEASURE_TYPE.VOLUME]: 3,
    [MEASURE_TYPE.LENGTH]: 2,
    [MEASURE_TYPE.AREA]: 2,
    [MEASURE_TYPE.COUNT]: 0,
    [MEASURE_TYPE.DIAMETER]: 3,
    [MEASURE_TYPE.THREAD]: 2,
    [MEASURE_TYPE.ELECTRICAL]: 2,
    [MEASURE_TYPE.SIZE]: 0,
  },

  // Unit abbreviations in Portuguese
  unitAbbreviations: {
    [MEASURE_UNIT.GRAM]: "g",
    [MEASURE_UNIT.KILOGRAM]: "kg",
    [MEASURE_UNIT.MILLILITER]: "ml",
    [MEASURE_UNIT.LITER]: "l",
    [MEASURE_UNIT.MILLIMETER]: "mm",
    [MEASURE_UNIT.CENTIMETER]: "cm",
    [MEASURE_UNIT.METER]: "m",
    [MEASURE_UNIT.INCHES]: "pol",
    [MEASURE_UNIT.UNIT]: "un",
    [MEASURE_UNIT.PAIR]: "pr",
    [MEASURE_UNIT.DOZEN]: "dz",
    [MEASURE_UNIT.HUNDRED]: "ct",
    [MEASURE_UNIT.THOUSAND]: "mil",
    [MEASURE_UNIT.PACKAGE]: "pc",
    [MEASURE_UNIT.BOX]: "cx",
    [MEASURE_UNIT.ROLL]: "rl",
    [MEASURE_UNIT.SHEET]: "fl",
    [MEASURE_UNIT.SET]: "cj",
    [MEASURE_UNIT.SACK]: "sc",
    [MEASURE_UNIT.CUBIC_METER]: "m³",
    [MEASURE_UNIT.CUBIC_CENTIMETER]: "cm³",
    [MEASURE_UNIT.SQUARE_CENTIMETER]: "cm²",
    [MEASURE_UNIT.SQUARE_METER]: "m²",
    // Diameter units (fractional inches)
    [MEASURE_UNIT.INCH_1_8]: '1/8"',
    [MEASURE_UNIT.INCH_1_4]: '1/4"',
    [MEASURE_UNIT.INCH_3_8]: '3/8"',
    [MEASURE_UNIT.INCH_1_2]: '1/2"',
    [MEASURE_UNIT.INCH_5_8]: '5/8"',
    [MEASURE_UNIT.INCH_3_4]: '3/4"',
    [MEASURE_UNIT.INCH_7_8]: '7/8"',
    [MEASURE_UNIT.INCH_1]: '1"',
    [MEASURE_UNIT.INCH_1_1_4]: '1 1/4"',
    [MEASURE_UNIT.INCH_1_1_2]: '1 1/2"',
    [MEASURE_UNIT.INCH_2]: '2"',
    // Thread units
    [MEASURE_UNIT.THREAD_MM]: "mm",
    [MEASURE_UNIT.THREAD_TPI]: "TPI",
    // Electrical units
    [MEASURE_UNIT.WATT]: "W",
    [MEASURE_UNIT.VOLT]: "V",
    [MEASURE_UNIT.AMPERE]: "A",
    // PPE Size units
    [MEASURE_UNIT.P]: "P",
    [MEASURE_UNIT.M]: "M",
    [MEASURE_UNIT.G]: "G",
    [MEASURE_UNIT.GG]: "GG",
    [MEASURE_UNIT.XG]: "XG",
  },
} as const;

// Validation constants
export const MEASURE_VALIDATION = {
  // Minimum and maximum values for different unit types
  limits: {
    [MEASURE_TYPE.WEIGHT]: { min: 0.001, max: 10000 }, // 1g to 10 tons
    [MEASURE_TYPE.VOLUME]: { min: 0.001, max: 10000 }, // 1ml to 10,000 liters
    [MEASURE_TYPE.LENGTH]: { min: 0.1, max: 10000 }, // 0.1mm to 10 meters
    [MEASURE_TYPE.AREA]: { min: 0.01, max: 1000000 }, // 0.01 to 1M square units
    [MEASURE_TYPE.COUNT]: { min: 1, max: 1000000 }, // 1 to 1M units
    [MEASURE_TYPE.DIAMETER]: { min: 0.1, max: 10000 }, // 0.1mm to 10 meters
    [MEASURE_TYPE.THREAD]: { min: 0.01, max: 100 }, // Thread pitch/TPI
    [MEASURE_TYPE.ELECTRICAL]: { min: 0.01, max: 10000 }, // Electrical values
    [MEASURE_TYPE.SIZE]: { min: 1, max: 1000 }, // Size values
  },

  // Step values for inputs
  steps: {
    [MEASURE_TYPE.WEIGHT]: 0.001,
    [MEASURE_TYPE.VOLUME]: 0.001,
    [MEASURE_TYPE.LENGTH]: 0.01,
    [MEASURE_TYPE.AREA]: 0.01,
    [MEASURE_TYPE.COUNT]: 1,
    [MEASURE_TYPE.DIAMETER]: 0.001,
    [MEASURE_TYPE.THREAD]: 0.01,
    [MEASURE_TYPE.ELECTRICAL]: 0.01,
    [MEASURE_TYPE.SIZE]: 1,
  },

  // Common validation messages in Portuguese
  messages: {
    required: "Este campo é obrigatório",
    positive: "O valor deve ser positivo",
    tooSmall: "Valor muito pequeno",
    tooLarge: "Valor muito grande",
    invalidUnit: "Unidade inválida",
    incompatibleUnits: "Unidades incompatíveis para conversão",
    invalidFormat: "Formato de número inválido",
  },
} as const;

// Helper functions for working with measure constants
export const measureConstants = {
  // Get icon component for measure type
  getMeasureTypeIcon: (measureType: MEASURE_TYPE) => {
    return (MEASURE_TYPE_ICONS as any)[measureType] || IconHash;
  },

  // Get icon component for unit
  getUnitIcon: (unit: MEASURE_UNIT) => {
    return (MEASURE_UNIT_ICONS as any)[unit] || IconHash;
  },

  // Get color scheme for measure type
  getMeasureTypeColors: (measureType: MEASURE_TYPE) => {
    return (MEASURE_TYPE_COLORS as any)[measureType] || MEASURE_TYPE_COLORS[MEASURE_TYPE.COUNT];
  },

  // Get unit category information
  getUnitCategory: (unit: MEASURE_UNIT) => {
    for (const [key, category] of Object.entries(UNIT_CATEGORIES)) {
      if ((category.units as any).includes(unit)) {
        return { key, ...category };
      }
    }
    return { key: "count", ...UNIT_CATEGORIES.count };
  },

  // Get validation limits for measure type
  getValidationLimits: (measureType: MEASURE_TYPE) => {
    return (MEASURE_VALIDATION.limits as any)[measureType] || MEASURE_VALIDATION.limits[MEASURE_TYPE.COUNT];
  },

  // Get step value for measure type
  getStepValue: (measureType: MEASURE_TYPE) => {
    return (MEASURE_VALIDATION.steps as any)[measureType] || MEASURE_VALIDATION.steps[MEASURE_TYPE.COUNT];
  },

  // Get decimal places for measure type
  getDecimalPlaces: (measureType: MEASURE_TYPE) => {
    return (BRAZILIAN_MEASURE_FORMATS.decimalPlaces as any)[measureType] || 2;
  },

  // Get unit abbreviation
  getUnitAbbreviation: (unit: MEASURE_UNIT) => {
    return (BRAZILIAN_MEASURE_FORMATS.unitAbbreviations as any)[unit] || unit;
  },
} as const;

// Export types
export type MeasureTypeColors = typeof MEASURE_TYPE_COLORS;
export type UnitCategory = (typeof UNIT_CATEGORIES)[keyof typeof UNIT_CATEGORIES];
export type MeasureStyles = typeof MEASURE_STYLES;
